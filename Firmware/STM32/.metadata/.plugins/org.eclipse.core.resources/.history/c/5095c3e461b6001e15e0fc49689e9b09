/*
 * M24256X.h
 *
 *  Created on: Jan 18, 2024
 *      Author: bens1
 */

#ifndef INC_M24256X_H_
#define INC_M24256X_H_

/* Includes*/
#include "stm32u5xx_hal.h" /* Needed for I2C */


/* Defines*/
#define M24256X_DEFAULT_CE_ADDR (0x00 << 1)
#define M24256X_CE_ADDR (0x00 << 1) /* Can be set between 0x00 and 0x07 */

#define M24256X_MEM_I2C_ADDR			(0xA0 | M24256X_CE_ADDR)
#define M24256X_ID_PAGE_I2C_ADDR		(0xB0 | M24256X_CE_ADDR)
#define M24256X_ID_PAGE_LOCK_I2C_ADDR	(0xB0 | M24256X_CE_ADDR)
#define M24256X_CFG_DEV_ADDR_I2C_ADDR	(0xA0 | M24256X_CE_ADDR)
#define M24256X_WP_I2C_ADDR				(0xA0 | M24256X_CE_ADDR)




/* M24256X Status typedef */
typedef enum {
	M24256X_OK 				= 0x00,
	M24256X_ERROR    		= 0x01,
	M24256X_BUSY    		= 0x02,
	M24256X_TIMEOUT 		= 0x03,
} M24256X_StatusTypeDef;

/* M24256X Device Struct */
typedef struct {
	/* I2C Handle*/
	I2C_HandleTypeDef *i2cHandle;
} M24256X_HandleTypeDef;



/* Initialisation */
M24256X_StatusTypeDef ADP5360_Init(M24256X_HandleTypeDef *dev, I2C_HandleTypeDef *i2cHandle);

/* User Functions */

/* Internal/debug Functions */
M24256X_StatusTypeDef ADP5360_SetChipEnableAddress(M24256X_HandleTypeDef *dev, uint8_t address); /* Address between 0x00 and 0x07 */
M24256X_StatusTypeDef ADP5360_LockChipEnableAddress(M24256X_HandleTypeDef *dev); /* THIS IS PERMANENT */

/* Low-Level Functions */
M24256X_StatusTypeDef ADP5360_ReadBytes(M24256X_HandleTypeDef *dev, uint8_t reg, uint8_t *data);
M24256X_StatusTypeDef ADP5360_WriteBytes(M24256X_HandleTypeDef *dev, uint8_t reg, uint8_t *data);


#endif /* INC_M24256X_H_ */
